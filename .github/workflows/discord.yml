name: Discord Webhook

concurrency: ci-${{ github.ref }}

on:
  workflow_dispatch:

  push:
    branches: [ "main" ] # Default release branch
    paths:
      - 'src/**'   

env:
  DOTNET_SKIP_FIRST_TIME_EXPERIENCE: true
  DOTNET_CLI_TELEMETRY_OPTOUT: true

jobs:

  discord:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2
    - name: Run Discord Webhook
      uses: johnnyhuy/actions-discord-git-webhook@main
      with:
        webhook_url: ${{ secrets.VALHEIM_DISCORD_TITANS_WEBHOOK_URL }}
        hide_links: false
        censor_username: false
        repo_name: ${{ github.event.repository.name }}
